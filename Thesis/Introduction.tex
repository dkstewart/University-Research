\chapter{Introduction}
\label{chap:intro}
In our increasingly computerized world, the concept of system safety has become of great importance to many different fields of study. A \emph{complex safety critical system} is one whose safety cannot be shown only through testing, whose logic is difficult to comprehend without the aid of analytical tools, and that may contribute -- directly or indirectly -- to loss of life, damage of the environment, or large economical losses~\cite{SAE}. Critical systems can be found in aviation, automotive, nuclear, or medical industries and the process of designing such systems, from birth to deployment in society, presents numerous problems that researchers have been contending with for many years. 

System safety has been an important factor in the design of systems for many years, but the birth of system safety as we know it today is associated with problems that the US Air Force experienced with accidents after World War II. Over 7,700 aircraft were lost between the years of 1952 and 1966 and over 8,000 people were killed~\cite{hammer}. At the time, many of the accidents were blamed on pilots, but many flight engineers did not believe the causes were so simple. They posited that safety must be designed and built into the aircraft~\cite{levesonWhitePaper}. Between the growth of nuclear capabilities, the defense industry complex, and the overall increase of computer capabilities, the need to abandon a ``fly-fix-fly" approach to safety was imminent~\cite{miller1954applying, levesonWhitePaper, hammer}. The goal became to avoid accidents before they occur. 

In present day, system safety analysis is crucial in the development life cycle of critical systems to ensure adequate safety as well as demonstrate compliance with applicable standards. The process that guides the development and certification of safety critical systems is highly controlled and standardized by competent authorities~\cite{SAE,SAE:ARP4761,SAE:ARP4754A}.

A prerequisite for any safety analysis is a thorough understanding of the system architecture and the behavior of its components; safety engineers use this understanding to explore the system behavior, assess the effect of failures on the overall safety objectives, and construct the accompanying safety analysis artifacts so that safe operation can be ensured~\cite{SAE:ARP4761,SAE:ARP4754A}. System information and safety artifacts are used to show that system requirements are correctly implemented. They can also reveal missing requirements or be used to strengthen the existing ones, and they give crucial information about how the system responds to faults and errors. An important goal of the safety assessment process is to show what specific kinds of failures may occur during normal use of the system; both qualitative and quantitative analyses can provide information on how the system is safe (or unsafe) for use.

The development life cycle of critical systems can be roughly seen as two main thrusts that occur in tandem: one side focuses on the system development itself; the hardware and software design, the requirements of the system, and the logical behavior of the components and their interactions. The other side is safety assessment of the system. Safety analysts use information generated during the system design and development process and analyze the system from the perspective of failure; in other words, they focus on what can go wrong in deployment. This is used to strengthen the system design and provide feedback into the development process.

Due to the complex nature of this arrangement, these sides are in reality not always done in strict parallel and are rarely synchronized perfectly. Furthermore, the artifacts given to safety analysts from system engineers are not always formal in nature, they may come from various sources, and they often do not clearly define the entire system and its behavior. To address this concern, \emph{model-based system development} (MBSA) caught the attention of researchers in the safety critical system domains~\cite{Joshi05:Dasc,CAV2015:BoCiGrMa,info17:HaLuHo,5979344,Gudemann:2010:FQQ:1909626.1909813}. In model-based development, the development efforts are centered on a model of the intended system. Various techniques, such as formal verification, testing, test case generation, execution and animation, etc., can be used to validate and verify the proposed system behavior. Given this increase in model-based development in critical systems, leveraging the resultant models in the safety analysis process and automating the generation of safety analysis artifacts holds great promise in terms of accuracy and efficiency. The safety assessment process should accurately and efficiently reflect the functionality of the system in the presence of faults and thus be used in the certification process. 


%An example of a commonly used artifact in the safety assessment process is all \emph{minimal cut sets}, or the minimal sets of faults that violate a system safety property. The automatic generation of these artifacts have been studied in depth, but have lacked in terms of scalability. Some research groups have introduced automating aspects of the safety assessment process and have developed tools to support this~\cite{Joshi05:SafeComp,CAV2015:BoCiGrMa,10.1007/978-3-319-11936-6-7}; nevertheless, there are gaps in current capabilities we aim to address. 

Many of the techniques proposed for MBSA require the development of {\em fault models} specific for safety analysis; that is, the techniques do not rely on the \emph{extension} of existing system models, but rather require purpose-built fault models that are separate entities~\cite{symbAltaRica, DBLP:conf/tacas/BittnerBCCGGMMZ16, info8010007, Gudemann:2010:FQQ:1909626.1909813}. Thus there is a system model used by the system engineers and a fault model used by safety analysts. This requires extra manual labor in order to create a separate fault model that accurately describes the system model itself. As systems become more complex, it becomes difficult to ensure that the fault model developed for safety analysis conforms with the the model created for the development efforts; just as it is difficult to show that the system model conforms to the actual implemented system. Another problem inherent in this approach is that any changes made in system development are not automatically reflected in the safety analysis process. This brings us right back to a non-model based approach.

Part of the safety assessment process determines how faults can manifest themselves in a particular component, but also how a manifested fault (or \emph{error}) can propagate through a system. Error propagation can be handled a variety of ways; most commonly this is done through the use of signal flow diagrams, a deep understanding of the system components, and the intuition of a good analyst. Various research has attempted to address this gap by providing tools that work over a model and provide some form of propagation analysis. Often this propagation is done explicitly, but as the size and complexity of industrial sized systems grow, this form of propagation becomes quite unwieldy. To address this problem, \emph{behavioral} propagation has been introduced~\cite{DBLP:conf/tacas/BittnerBCCGGMMZ16,stewart2020safety}. Behavioral propagation automates the process of ``moving" the error through the system and requires no explicit statements of what affect the error will have on components. In reality, both approaches are beneficial to an analyst. At times, there are effects that are known and easily captured explicitly. Other times, even within the same system, complex interactions make explicit propagation difficult to manage. In order to provide the most flexibility for an analyst, both approaches are beneficial.

Another sticking point of MBSA is the scalability of the \emph{verification} of the model and its requirements. Verification is the process of mathematically proving or disproving the correctness of a system with respect to certain properties or requirements. As a model and the number of system requirements grows, a scalable approach is of utmost concern. Commonly used artifacts in the safety assessment process are \emph{minimal cut sets}, or the minimal sets of faults that violate a system safety property. The automatic generation of these artifacts have been studied in depth, but have lacked in terms of scalability. Some research groups have introduced automating aspects of the safety assessment process and have developed tools to support this~\cite{Joshi05:SafeComp,CAV2015:BoCiGrMa,10.1007/978-3-319-11936-6-7}; nevertheless, there are gaps in current capabilities we aim to address. 

%\danielle{Cut mention of compositional here? Not needed... A \emph{compositional} approach to verification has been shown to be a more scalable approach to this problem. Compositional verification analyses the system components per layer of the architecture and combines the result. This breaks a large proof problem into a number of smaller proofs; a more manageable task for a model checker.} 

%Leveraging valuable proof information about the system to use in the safety assessment process is of interest in this disseration. The scalable generation of the combinations of faults that can cause system failure is something that would be of great benefit to the safety analysis community and is currently a major bottleneck in using automated approaches in industry. Given recent research in the area of formal verification, this has become theoretically possible and is outlined extensively in this dissertation.

%Probabilistic evaluations of the faults and their overall impact on the system is a large part of the safety assessment process. Utilizing a compositional approach for the generation of minimal cut sets shows promise in compositional probabilistic computations as well. %Currently, probabilistic computations are not performed compositionally and 

%In this dissertation, we outline a novel way to utilize the verification information used during the system development process in order to automate the generation of both qualitative and quantitative safety analysis artifacts. Furthermore, we describe a Model Based Safety Analysis (MBSA) approach to critical system development in which the safety analysis is tied directly to the system model and the flexibility of the analysis provides various ways of capturing error propagation information, single points of failures, and minimal cut sets.

%In order to address these gaps, a modeling notation must be defined such that the information required for the safety assessment process can be easily captured in the system model. Once this notation is in place, analysis procedures must be defined in order to check if the system model meets its requirements in the face of failures. Given the size of industrial systems, these analyses must be scalable and efficient. Further exploration of the model, component interactions, and problematic fault combinations must be incorporated into these analyses in order to fully understand the safety of the system. These are all described and tested in case studies that demonstrate the effectiveness and scalability of the approach. 


\section{Objective and Summary of Contributions}
The \textbf{long range goal} of this research is to increase system safety through the support of a model-based safety assessment process backed by formal methods to help safety engineers with early detection of design issues and automation of the artifacts required for certification. The \textbf{objectives of this dissertation}, which are logical steps towards the goal, are to define a modeling notation such that the information required for the safety assessment process can be easily captured in the system model. Once this notation is in place, analysis procedures are defined to verify that the system model meets its requirements in the face of failures. Further exploration of the model, component interactions, and problematic fault combinations must be incorporated into these analyses in order to fully understand the safety of the system. Domain specific case studies then demonstrate the effectiveness of this approach.

The objectives of this dissertation were accomplished by pursuing the following aims: 

\paragraph{Defined a modeling notation to capture safety information in a shared model.}
Before a fault modeling notation could be defined, a modeling language was chosen. The Architecture Analysis and Design Language (AADL) is an SAE International standard language that provides a unifying framework for describing the system architecture for performance-critical, embedded, real-time systems~\cite{AADL_Standard,FeilerModelBasedEngineering2012}. From its conception, AADL has been designed for the design and construction of avionics systems.  Rather than being merely descriptive, AADL models can be made specific enough to support system-level code generation; thus, results from analyses conducted, including safety analysis, correspond to the system that will be built from the model.  This supports a close relationship between the system development and safety assessment processes. This modeling language was chosen for these reasons. 

To accomplish the first aim in this dissertation, the Safety Annex for AADL was built with a few specific fault modeling needs in mind~\cite{Stewart17:IMBSA}. Both behavioral and explicit propagation of faults is supported, flexible fault modeling allows for modeling various types of realistic component failures, and a back-end model checker is used to perform the analysis.  Within the AADL model, an annex is added which contains fault definitions for components. The flexibility of the fault definitions allows the user to define complex or simple fault behavior. This allows analysts to capture realistic faulty components and scenarios in the model. When a fault is activated, it modifies the output of the component. This faulty behavior may violate the contracts of other components in the system, including assumptions of downstream components. The impact of a fault is analyzed by the model checker when the safety analysis is executed on the extended model. 

\paragraph{Defined analysis procedures to verify behavior of the model in the presence of faults.}
Given a safety property or requirement, it is useful to see if that property can be verified when faults are present (or active) in the system model. The fault analysis statement (also referred to as the fault hypothesis) resides in the AADL system implementation that is selected for verification. This may specify either a maximum number of faults that can be active at any point in execution (\emph{max n fault hypothesis}) or that the only faults to be considered are those whose probability of simultaneous occurrence is above some probability threshold (\emph{probabilistic hypothesis}).  In the former case, we assert that the sum of the \emph{true} fault activation variables is at or below some integer threshold.  In the latter, we determine all combinations of faults whose probabilities are above the specified probability threshold, and describe this as a proposition over the fault activation variables. If any combination of faults falls within these parameters during analysis, a detailed counterexample is given to the user showing the state of the system when these faults are present. This provides valuable system information about the relationship between the requirement of interest and the defined faults in the model. 

\paragraph{Provided in depth analysis capabilities that explore system models and compositionally compute minimal cut sets.}
The minimal sets of faults that violate a safety property, minimal cut sets, are commonly used in the assessment and certification of critical systems. Since the introduction of cut sets in the field of safety analysis, much research has been performed to address their generation~\cite{fta:survey,rauzy1993new,historyFTA,Bozzano:2010:DSA:1951720,rausand2003system}. One of the ongoing problems with minimal cut set generation is is the inability to scale to industrial-sized systems. As the system gets larger, more minimal cut sets are possible with ever increasing cardinality. In recent years, the capabilities of model checking have been leveraged to address this problem.~\cite{bieber2002combination,schafer2003combining,fta:survey,contractBasedDesign,symbFTA,DBLP:conf/cav/BozzanoCPJKPRT15}. We have pushed forward on this front and found a way to generate these sets in a \emph{compositional} fashion. Compositional verification performs the proof in a per-architectural-layer approach and to our knowledge, compositional minimal cut set generation has not been previously performed. This research formally proves the relationship between verification results of compositional analysis and minimal cut sets, and implements the algorithms for minimal cut set generation in the Safety Annex.

\paragraph{Explored how the development of requirements can change analysis results.}
Splitting a complex requirement into its constituent pieces can change certain analysis results. Because this described approach relies so heavily on the contracts written for each component, it is natural to question how the written requirements may affect analysis results. This idea was explored by automatically detecting certain patterns in the requirements and rewriting them into equivalent forms. Then we compared analysis results between the original contracts and the rewritten contracts and discussed the findings. The specificity of these requirements is referred to as \emph{granularity} and this idea ties into the broader discussion of the ideas underlying requirement engineering, behavioral modeling, and system development. 

\paragraph{Demonstrated these ideas and implementations using case studies.}
An industrial sized case study from the safety critical aerospace domain is used to illustrate all of the above. Numerous subsystem examples are given to illustrate specific capabilities and solutions. This serves to demonstrate how this process works in the domain of aerospace and how it can be applied to various critical system domains. 


%5[Defined and implemented a Safety Annex to enable fault modeling in AADL.] The modeling needs of a safety analyst were researched and a grammar that extends the Architecture Analysis and Design Language (AADL) was defined. A safety analysis platform was implemented that uses this grammar extension along with a backend SMT model checker for compositional verification purposes.
%\item \textbf{Define a grammar for a safety analysis tool that will work closely with a standard modeling language that has existing support for formal verification.} The grammar will formally define a user-friendly syntax that will still allow for rich fault models. The analyst will be able to wrap a fault around the output of a component such that the fault model has access to certain elements of the system components while still providing separation between the fault model and the nominal system model. The grammar should extend a standard system modeling language to provide ease in the integration of these languages and supporting tool framework. 
%[Defined compositional verification capabilities in the face of component failures.] The analysis procedures were defined that allow an analyst to investigate system behaviour under a predetermined max number of faults or a max probability threshold for fault combinations.%, and develop and implement analysis procedures for these analyses. 
%\item \textbf{Determine how to capture behavioral and explicit error propagation through the use of formal verification techniques.} Given a complex model with numerous interactions, it becomes difficult to realize all possible effects of an active fault in the system; therefore, it is necessary to be able to provide behavioral error propagation within the system model. That being said, at times it is also helpful to explicitly state how an error propagates, for example when components are physically co-located but logically modeled separately. Thus having the capability to represent and model both types of propagation is valuable to an analyst. Research will need to be performed to determine how the effects of an active fault can be propagated through the contracts of the system's subcomponents; additionally, it is necessary to see exactly how this propagation will effect the system level properties. 


%[Defined compositional computation of minimal cut sets.] Formally proved the relationship between verification results of compositional analysis and minimal cut sets, and implemented the algorithms for minimal cut set generation in the analysis tools supporting the Safety Annex.

%[Researched how development of requirements could change analysis results.] Splitting a complex requirement into its constituent pieces can change how the model checker derives the artifacts used in the analysis.

%[Illustrated the ideas using a case study] An industrial sized case study from the safety critical aerospace domain was used to illustrate all of the above.  


%The beginning phase of this dissertation research included research into the needs of safety analysts and resulted in the definition of the Safety Annex~\cite{stewart2020safety, Stewart17:IMBSA}, the implementation of the Safety Annex parser in the OSATE tools~\cite{SEI:AADL}, and the support for analysis of AADL models extended with the Safety Annex~\cite{cofer2012compositional}. The final steps of this research included the compositional generation of minimal cut sets and a full implementation of these algorithms in the Safety Annex. 

\section{Structure of this Document}
This dissertation is organized into 7 chapters. The preliminaries in Chapter~\ref{chap:prelim} discusses the background and justification for this research, critical system development and the state of the field, and ends with an overview of formal verification. Chapter \label{chap:faultModeling} provides a detailed look at the Safety Annex and its implementation. Chapter~\ref{chap:mcsGen} describes the compositional generation of minimal cut sets. Chapter \label{chap:granularity} provides the initial research into how a particular form of contract definition can change the results of the analysis; it is followed by a chapter on case studies. Lastly, the conclusion summarizes the research approach in this dissertation.











