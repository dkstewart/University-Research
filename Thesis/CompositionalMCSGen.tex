\chapter{Compositional Minimal Cut Set Generation}
\label{chap:mcsGen}

Given the importance of minimal cut set computations for industrial sized systems, much research has been done on their generation (e.g.,~\cite{fta:survey,rauzy1993new,historyFTA,Bozzano:2010:DSA:1951720,rausand2003system}). As described in preliminary sections, the methods of cut set generation have varied greatly depending on how the system is modeled -- transition systems, state machines, decision diagrams, to name a few-- and what kind of model checking is performed -- symbolic algorithms, bounded model checking, etc. Compositional minimal cut set generation has not, to our knowledge, been previously explored. Due to the compositional nature of the verification it is difficult to see how faults that are {\em not} present in the current layer will affect the component behaviors and proofs of the current layer. This information needs to get passed through the layers of the model somehow. 

A contribution of this dissertation is providing a means for the compositional generation of minimal cut sets. In order to perform this kind of computation compositionally, a pre-existing framework was required. \danielle{Instead of having full paragraphs here for each piece, should I refer to the sections where these things are defined fully? Or provide a short preview here to eliminate the need to jump around in the document? Or both?}

(1) A rich modeling language was needed that allowed for the hierarchical definition of the model. The Architecture Analysis and Design Language (AADL)~\cite{aerospace2012sae} was chosen; AADL is an SAE International standard language that provides a unifying framework for describing the system architecture for performance-critical, embedded, real-time systems~\cite{AADL_Standard,FeilerModelBasedEngineering2012}. %Furthermore, AADL supports language extensions called {\em annexes} and there are open-source verification options that reason over AADL models.

(2) A compositional verification framework was required for the analysis of AADL models. The Assume-Guarantee Reasoning Environment (AGREE) is a tool for formal analysis of behaviors in AADL models~\cite{NFM2012:CoGaMiWhLaLu}.  It is implemented as an AADL annex and annotates AADL components with formal behavioral contracts. Each component's contracts can include assumptions and guarantees about the component's inputs and outputs respectively, as well as predicates describing how the state of the component evolves over time. AGREE translates an AADL model and the behavioral contracts into the dataflow programming language Lustre~\cite{Halbwachs91:IEEE} and then queries the model checker JKind~\cite{2017arXiv171201222G} to conduct the back-end analysis. The analysis can be performed compositionally or monolithically.

(3) A safety specific language was required that allows for the definitions of faults over component outputs and the model checker provides safety specific information and proofs about the fault model. In the early stages of this research, the Safety Annex for AADL was developed. The Safety Annex for AADL and its supporting extensions to the AADL tools provide the ability to reason about faults and faulty component behaviors in AADL models~\cite{Stewart17:IMBSA,stewart2020safety, nasaFinalReport}. In the Safety Annex approach, AGREE contracts are used to define the nominal behavior of system component and the nominal model is verified using JKind. The Safety Annex implementation weaves faults into the nominal model and analyzes the behavior of the system in the presence of faults. The tool supports behavioral specification of faults and their implicit propagation through behavioral relationships in the model and provides support to capture binding relationships between hardware and software components of the system. %For more information on the Safety Annex, see Chapter~\ref{chap:faultModeling}.

The remainder of this chapter describes compositional minimal cut set generation. First, the formal background and definitions required to understand the approach are supplied, then the proofs and algorithms are given. The implementation of these algorithms in the Safety Annex are then described.

\section{The High Level Idea and Approach}
Recently, Ghassabani et al. developed an algorithm that traces a safety property to a minimal set of model elements necessary for proof; this is called the \textit{all minimal inductive validity core} algorithm (\aivcalg)~\cite{GhassabaniGW16,Ghassabani2017EfficientGO,bendik2018online}. Inductive validity cores produce the minimal set of model elements necessary to prove a property. Each set contains the \emph{behavioral contracts} -- the requirement specifications for components -- of the model used in a proof. When the \aivcalg algorithm is run, this gives the minimal set of contracts required for proof of a safety property. If all of these sets are obtained, we have insight into every proof path for the property. Thus, if we violate at least one contract from every MIVC set, we have in essence ``broken" every proof path. This is the information that is used to perform fault analysis using MIVCs.

Safety analysts are often concerned with faults in the system, i.e., when components or subsystems deviate from nominal behavior, and the propagation of errors through the system. To this end, the model elements included in the reasoning process of the \aivcalg algorithm are not only the contracts of the system, but faults as well. This will provide additional insight into how an active fault may violate contracts that directly support the proof of a safety property. 

Before the specifics of the algorithm and proofs can be discussed, some background definitions are required. Throughout this chapter, a running example is referenced and we provide the description here.

\input{runningexampleMCS}

\input{backgroundMinCutSet}

\input{formalizationMinCutSet}

\input{algorithms}

