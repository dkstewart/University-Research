\chapter{Case Studies}
\label{chap:caseStudies}
This chapter serves to illustrate the safety annex in terms of both modeling and analysis of various systems. The first section outlines a large case study example called the Wheel Brake System for an aircraft; the nominal system is modeled and extended by the safety annex. We discuss the results in terms of scalability and present the timing and minimal cut set results. An example showing the flexibility of fault modeling with the safety annex is given in the following section. The chapter concludes with a discussion on analysis timing results for a set of models. 

\input{WBS}
\input{pid}

\section{Discussion on Timing Results}
Given that the safety annex has been developed within the course of this research, there was no pre-existing benchmark models with which to experiment upon or show comparisons with existing tools. As described in Section~\ref{sec:modelCheckingInSA}, there are a few related research tools that perform similar analyses, e.g., xSAP~\cite{DBLP:conf/tacas/BittnerBCCGGMMZ16}, AltaRica~\cite{signoret1998altarica}, SAML~\cite{Gudemann:2010:FQQ:1909626.1909813}, but all of these perform analysis over different modeling languages, use varying analysis methodology, and some even separate fault models from the system modeling language. 

Throughout the course of this research, a number of small systems have been developed that illustrate various aspects of analysis or modeling capabilities. These range in size from quite simple two component single layer systems up to the large WBS example outlined in Section~\ref{sec:wbs}. But even the size of the model in terms of the architecture does not completely capture the analysis timing results. For example, a single layer architecture containing two components is small in terms of AADL models, but the nominal AGREE model may contain numerous guarantees and likewise a large number of faults, both of which increase computation time for proofs and for minimal cut set generation compared to a small architectural model with fewer contracts and faults. Likewise, the total number of contracts do not tell the whole story; that number does not give insight into the complexity of the formulas in the contracts. Thus, there are many ways of viewing and comparing analysis results timing. 

What we aim to illustrate in this section is that fault modeling using this approach is feasible and not much more computationally expensive than the nominal model analysis. We used 15 models developed in AADL and extended with AGREE and the safety annex for these analysis timing results. There are two main approaches to fault model verification: verification in the presence of faults, and minimal cut set generation. In the former analyses, we compare the time required to run the full nominal model analysis with the time required to run the fault analysis. The nominal model has no faults defined and is the AGREE/AADL model alone. The fault analysis is the extended system model with faults defined and woven into the nominal model. In the minimal cut set generation, we wish to show the nominal analysis time (no faults defined or present in the model), the analysis with faults woven into the model but all constrained to false, and the total time taken to transform the MIVCs into minimal cut sets. In both cases, we hold the fault analysis statement constant and use a max $4$ fault threshold. 




As outlined in Section~\ref{sec:wbs}, there are multiple forms of analysis that can be used on each model. The analysis was run on an \danielle{machine specs}

\paragraph{Max \textit{n} analysis, compositional:} In this form of analysis, the model is verified per architectural layer from the top down. Any active faults occur {\em per layer} and any counterexamples only take that layer into account. For timing results, we compare the nominal model analysis time with the complete fault analysis time per model. 

\danielle{Graph with model x axis and time y axis. Two graphs -- one for fault, one for nominal.} 

\paragraph{Max \textit{n} analysis, monolithic:} Monolithic analysis takes a flattened model and proves the safety properties given all contracts on all components. The fault hypothesis statement (max \textit{n} analysis) constrains the number of active faults; this value -- depending on the model -- may change the timing of analysis. For our purposes, we set \textit{n} constant in the analysis runs for $n = 4$. For some of the models, this is above the highest cardinality of any cut set produced, for others this is not the case. Then we compare the timing results between nominal and fault analysis for the given models.

\danielle{Graph with model x axis and time y axis. Two graphs -- one for fault, one for nominal. Also say something about the n given for these analyses.} 

\paragraph{Probabilistic analysis, monolithic:} In this case, the constraint on the active faults is given in terms of probability. Since each fault has probability of occurrence specific to the component and the domain, it is difficult to capture all information in the results, so we set the probabilistic threshold to $1.0 \times 10^{-9}$ to allow for multiple fault activations and let the fault occurrence probability match that of the domain and component. 

\danielle{Graph with model x axis and time y axis. Two graphs -- one for fault, one for nominal. Also say something about the n given for these analyses.} 

\paragraph{Max \textit{n} analysis, generation of minimal cut sets:} For the generation of minimal cut sets, the nominal model is first proved compositionally. The results from this analysis -- namely the MIVCs -- are then used in the algorithms defined in this research. For the analysis results, we show the nominal time of analysis compared with the fault analysis time. The nominal analysis consists of the initial MIVC generation and the fault analysis time consists of the hitting set algorithm with the transformation of the MCSs into minimal cut sets. 

\danielle{Should I include a discussion on the number of MIVCs/MCSs/MinSets generated per run? Perhaps the WBS discussion was enough in that regard.}

\paragraph{Probabilistic analysis, generation of minimal cut sets:} We set the probabilistic threshold (hypothesis statement) to be $1.0 \times 10^{-9}$ for all safety properties for all models and show the comparison between the nominal model analysis and the minimal cut set generation procedures. 


